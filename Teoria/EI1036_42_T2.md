---
theme : "white"
transition: "zoom"
highlightTheme: "darkula"
---

# Tema 2: Introducción al
 PHP

### EI1042 - Tecnologías y Aplicaciones Web

**EI1036- Tecnologías Web para los Sistemas de Información (2018/2019)**

*Professora: Dra. Dolores Mª Llidó Escrivá*

[Universitat Jaume I](https://www.uji.es/).

---

## Índice

- Introducción a PHP
- Sintaxis básica
- Tipos de datos
- Salida Estándar
- Variables Expresiones y Operadores
- Funciones
- Formularios
- Objetos

---

### 1. Introducción al PHP

- PHP es un lenguaje de script del lado del servidor.
- Creado por Rasmus Lerdorf para uso personal en 1994
- PHP = PHP: Hypertext Preprocessor
- Versión actual: PHP 7
- Es potente, fácil de aprender, de libre
distribución, permite el acceso a bases de datos y otras
funcionalidades orientadas a la red
- Dispone de abundante soporte en la Web


---

### Editores PHP

- Visual Studio
- http://free-php-editor.com/
- http://en.wikipedia.org/wiki/List_of_PHP_editors
- Aptana Studio
- Eclipse con PHPEclipse o PHP Development Tools
- Netbeans
- Notepad++


---

### Ficheros con PHP
-  Fichero PHP:  hola.php

``` PHP 
<?php 
echo "Hola Mundo";
?>
```
- Fichero HTML: bienvenido.html

``` HTML
<html>
<p> Bienvenido <? php $nombre_usu ?> </p>
</html>
```

---

### Ejecución PHP

-  Consola

- ```php.exe "C:\PHP Scripts\script.php"```
- Entorno php:
```
php.exe
$hola=“Adios”;
$echo $hola
```


---

### Configuración php

-  Fichero: php.ini
-  Visualizar la configuración del servidor: phpinfo()


``` PHP
#php.ini
include_path = ”.:/home/dllido/privHtml“
error_reporting = E_ALL
display_errors = 1
followindex
```


---

####  Páginas web dinámcas con PHP

- El cliente no ve el código PHP sino los resultados que produce en la salida estándar.
- Apache ejecuta php no como un CGI sino como un módulo.Version php  S.O. != Apache

![Image of La World Wide Web](./media/T2/image1.png)

```
http://dllido.al.nisu.org/Lab2017/pp/cosa/hotel
```

---

##  Servidor WEB Local

Local:
- Instalar PHP
- Ejecutar:
``` php -S localhost ```

php [options] -S <addr>:<port> [-t docroot]
[http://localhost:8088/pruebas/NISU/062018/pruebas_php/tutoPh](http://localhost:8088/pruebas/NISU/062018/pruebas_php/tutoPh)
p.php

---

###  Servidor WEB Producción

[Apache 2.3 http://httpd.apache.org/docs/current/es/](http://php.net/manual/es/)

Requisitos
- Servidor web Apache (www.apache.org) con el módulo PHP (www.php.net)
- base de datos MySQL (www.mysql.com) si se desea crear
páginas dinámicas
- Herramientas para la gestión de MySQL, como PHPMyAdmin
(www.phpmyadmin.net)


---

### Servidor WEB  desarrollo: XAMPP 

 * XAMPP es una distribución de Apache que incluye MySQL, PHP y  phpMyAdmin
 * XAMPP es gratuito y fácil de instalar
 * XAMPP es multiplataforma
 * Precaución: la configuración por defecto  no es segura, ni para un entorno de producción.

---

## 2. Sintaxis básica

- PHP es sensible a las mayúsculas/minúsculas.
- Las instrucciones se separan con ";"
- Espacios en blanco y cambios de línea no se tienen en cuenta.
- PHP interpreta entre comillas dobles pero no entre comillas
simples.
- Se utiliza codificación utf8.
- Comprobar que el editor no ha generado un BOM ( byte order mark de unicode en la primera línea)



Guia Estilos: https://www.php-fig.org/psr/psr-2/

---

##Ejemplo fichero PHP

``` PHP
<?php
$var = "test";
echo "$var"; // Salida:"test“
echo "\$var"; // Salida:" "$var"
echo '$var'; // Salida:" "$var"
# otro comentario hasta el final de la línea
/* comento
varias líneas */
```

---

#### Usar: YodaStyle
![Image of La World Wide Web](./media/T2/image2.png)

Escribir comparaciones  al revés ( Yoda habla al revés).

En ocasiones podemos equivocarnos  _if ($value = true)_ y ...simplemente estamos
asignado SIEMPRE true a nuestra variable. Nos costaría identificar el error en nuestro código.



---

## 3. Tipos de datos

- Tipos escalares: boolean, integer, double, string
- Tipos compuestos: array, object
- Tipos especiales: resource, NULL
- El tipo de una variable no se suele 

---

### ¿Que tipo es la variable? 

###Funciones de interés:
-  gettype() devuelve el tipo de una variable
- is_type() comprueban si una variable es de un tipo dado:

``` is_array(), is_bool(), is_float(), is_integer(), is_null(), is_numeric(), is_object(), is_resource(), is_scalar(),is_string()```

- var_dump() muestra el tipo y el valor de una
variable. 

---

### Tipo String

- Las cadenas se encierran entre comillas simples o dobles:
- ‘simples’: admite los caracteres de escape \’ (comilla simple) y \\.
- “dobles”: admite más caracteres de escape, como \n, \r,\t, \\, \$, \”.
- Ejemplos:

```
**$a = 9;
print ‘a vale $a\n’;
// muestra a vale $a\n
print “a vale $a\n”;
// muestra a vale 9 y avanza una línea
print “<IMG SRC=‘logo.gif’>”;
// muestra <IMG SRC=‘logo.gif’>
print “<IMG SRC=\”logo.gif\”>”;
// muestra <IMG SRC=“logo.gif”>**

```

---

### Array Asociativo

Sintaxis:
array ([clave =>] valor, ...)

```PHP 
$medidas = array (10, 25, 15);
echo $medidas[0]

$color = array (‘rojo’=>101, ‘verde’=>51, ‘azul’=>255); 

#Acceso:
echo $color[‘rojo’] // No olvidar las comillas
echo array_keys($color)
```

---

#### 4 Salida estándar

¿Cómo enviar mensajes a la salida estándar?
-  echo — Muestra una o más cadenas.
-  print — Mostrar una cadena.
-  printf — Imprimir una cadena con formato.
-  print_r — Imprime información legible para humanos.
-  var_dump— Vuelca información sobre una variable.

---

###Diferencias echo o print
-  Void echo (string argument1[,...string argumentN])
-  Int print (argument)


    *  Print sólo tiene un argumento (echo puede tener varios)
    *  print devuelve 1 (significa que ha generado la salida)

No es obligatorio el uso de paréntesis ya que no son
realmente una función.
```PHP
echo “Hola mundo”;echo “Hola “, “mundo”; 
print “Hola mundo”;
print “Hola “. “mundo”;
```

---

## 5.  Variables

- No se declara el tipo de las variables.
- Las variables se pueden asignar
    -  Por valor
    -  Por referencia (con &)
    - Creación de nombres de variables dinámico.

```PHP
$x='equis';
$_x = &$x; //referencia a $x
$_x ='x';
echo $x; //x
echo $_x; //x
$a = "hola";
$$a = "mundo";
print "$a $hola\n";
//hola mundo
print "$a ${$a}";
//hola mundo 18
```


---

### Ámbito de variables

- Local: Variable definida en una función
    -  Está limitada a dicha función.
    -  Se elimina al acabar la ejecución de la función
    -  Salvo si la variable se declara como **static** .
- Global:
    -  No se puede definir dentro de las funciones a menos que :
       - se declare en la función con la palabra clave 'global'
       - O que se acceda con el array $GLOBAL[indice]
    -  Existen durante todo el tiempo de proceso del fichero
    -  Al acabar de procesar el fichero se eliminan las variables globales
 


---

### Superglobal

- Variables predefinidas en PHP
- Están disponibles en todos los ámbitos.

Ejemplos:

- $GLOBALS — Array con todas las variables disponibles en el ámbito global
- $_SERVER — Información del entorno del servidor y de ejecución
- $_GET(POST) — Variables HTTP GET(POST)
- $_FILES — Variables de Carga de Archivos HTTP
- $_REQUEST — Variables HTTP Request
- $_SESSION — Variables de sesión
- $_COOKIE— Variables con datos de la cookie
- $_ENV— Variables del entorno


---

#### Verificación existencia Clases/variables

- Variables: isset() (includes arrays, objects, etc.)
- Functions: function_exists()
- Classes: class_exists()
- Constants: defined()

---

#### 6. Funciones

Ejemplo:
```PHP
function suma ($x, $y)
{
$s = $x + $y;
return $s;
}
```
Salida:
```
$a=1;
$b=2;
$c=suma ($a, $b);
print $c;
```

---

#### Funciones

- Por defecto paso parámetros por valor
- Paso por referencia:

```PHP
function incrementa (&$a)
{
$a = $a + 1;
}
$a=1;
incrementa ($a);
print $a; // Muestra un 2
```

---

#### Funciones

- Argumentos por defecto
- Los argumentos con valores por defecto deben ser siempre
los últimos:
```PHP
function muestranombre ($nombre, $titulo= "Sr.")
{
print "Estimado $titulo $nombre:\n";
}
muestranombre (“Fernández”);
muestranombre (“Fernández”, "Prof.");
```
Salida:
```
Estimado Sr. Fernández:
Estimado Prof. Fernández:
```



---


### 8.  Formularios desde PHP

```HTML
RADIO
<form action=’procesar.php” method=”get”>
Sexo:
<INPUT TYPE="radio" NAME=“sexo" VALUE=“M“ CHECKED>Mujer
<INPUT TYPE="radio" NAME=“sexo" VALUE=“H">Hombre
<INPUT TYPE=”submit”>
</form>
```
```PHP 
#Procesar.php
<?PHP
$sexo = $_REQUEST[‘sexo’];
print ($sexo);
?>
```
Ejercicio: ¿Cuál es la petición al servidor al pulsar submit?


---

### Formularios desde PHP

CHECKBOX

```php
<INPUT TYPE="checkbox" NAME="extras[]" VALUE="garaje" CHECKED>Garaje
<INPUT TYPE="checkbox" NAME="extras[]" VALUE="piscina">Piscina
<INPUT TYPE="checkbox" NAME="extras[]" VALUE="jardin">Jardín
```
``` PHP 
<?PHP
$extras = $_REQUEST[‘extras’];
foreach ($extras as $extra)
print (“$extra<BR>\n”);
?>
```

---

### Formularios desde PHP

BUTTON

```PHP 
<INPUT TYPE="button" NAME=“actualizar" VALUE="Actualizar datos">
```

```PHP
<?PHP
$actualizar = $_REQUEST[‘actualizar’];
if ($actualizar)
print ("Se han actualizado los datos");
?>
```

---

### Formularios desde PHP

SELECT múltiple

```
Idiomas:
<SELECT MULTIPLE SIZE="3" NAME="idiomas[]">
<OPTION VALUE="ingles" SELECTED>Inglés
<OPTION VALUE="francés">Francés
<OPTION VALUE="alemán">Alemán
<OPTION VALUE="holandés">Holandés
</SELECT>
```
```
<?PHP
$idiomas = $_REQUEST[‘idiomas’];
foreach ($idiomas as $idioma)
print (“$idioma<BR>\n”);
?>
```


---

## 8. OOP en PHP

- PHP no es un lenguaje 100% Orientado a Objetos.
- Soporta:
- Encapsulamiento.
- Tipos Abstractos de Datos y ocultamiento de la
Información.
- Herencia.
- Polimorfismo.


---

### CLASES


- La definición básica:

```PHP
class cliente{ 
    var $numero;     
    function dame_numero(){ 
        return $this->numero; 
    } 
} 
```



### Objetos
```PHP
$Paco=New cliente();
$Paco->numero=5
$Paco->dame_numero();
```

---

#### Definición de clases en PHP
```PHP
class NombreClase {
[public | private | protected ] $nombreVariable;
[public | private | protected ] function
nombreMetodo($parametros) {
//Cuerpo de la función
}
[public | private | protected ] function
__construct($parametros) {
//Cuerpo de la función
}
function __destruct() {
//Cuerpo de la función
}
}
```
- PHP permite declarar métodos constructores/destructores para las clases. 
- No es obligatoria su existencia.
- Los constructores/destructores padres no son llamados implícitamente desde la clase hija. 



---

#### Visibilidad Variables y Métodos

- Public: pueden ser accesibles desde cualquier lado.
- Protected: accesibles sólo desde la misma clase, desde las
clases que hereden de ella y desde las clases parent.
- Private: únicamente pueden ser accesibles desde la clase
que los definió.


---

### Constructor/Destructor
```PHP 
class cliente{ 
var $nombre; 
var $numero; 
var $peliculas_alquiladas; 
function __construct($nombre,$numero){ 
$this->nombre=$nombre; 
$this->numero=$numero; 
$this->peliculas_alquiladas=array();  } 
function __destruct(){ 
echo "<br>destruido: ". $this->nombre; } 
function dame_numero(){ 
return $this->numero;  } 
} 
//instanciamos un par de objetos cliente 
$cliente1 = new cliente("Pepe", 1); 
$cliente2 = new cliente("Roberto", 564); 
//mostramos el numero de cada cliente creado 
echo "El identificador del cliente 1 es: ". $cliente1->dame_numero(); 
echo "<br>El identificador del cliente 2 es: ". $cliente2->dame_numero();
```

---

#### Herencia: extends

- La Herencia permite a una clase, “heredar”, los métodos y atributos para
este proceso es usada la palabra reservada extends seguida de la que
será su clase “padre”.
- Cuando se extiende una clase, la subclase hereda todos los métodos
públicos y protegidos de la clase padre. A menos que una clase
sobreescriba estos métodos, mantendrán su funcionalidad original.


---

#### Ejemplo Objetos

```PHP
class Foo{
    public function printItem($string)    {
        echo 'Foo: ' . $string . ”\n”;    }

class Bar extends Foo
{    public function printItem($string)
    {        echo 'Bar: ' . $string . ”\n”;
   }}
$foo = new Foo();
$bar = new Bar();
$foo->printItem('baz'); // Salida: 'Foo: baz
$bar->printItem('baz'); // Salida: 'Bar: baz'
```

[http://dllido.al.nisu.org/Lab201](http://dllido.al.nisu.org/Lab2017/T1/obj1.php)


---

### $this, self, parent


-  $this es una variable especial de auto-referencia del objeto para
acceder a sus métodos y propiedades.
- self y parent: son pseudo-variables para acceder a una propiedad o método  de una clase.

-  Diferencia entre $this y self::
- Usa $this para hacer referencia al objeto (instancia) actual, y se
utiliza self:: para referenciar a la clase actual. 

``` PHP
$this->nombre 
self::nombres
´´´

---

#### Ejemplo db_abstract_Model.php

https://codex.wordpress.org/Class_Reference/wpdb

https://codex.wordpress.org/Creating_Tables_with_Plugins



---

#### Bibliografía

- PHP: [http://es.php.net/manual/es/](http://es.php.net/manual/es/)
- Apache: [http://httpd.apache.org/docs/2.3/es/](http://httpd.apache.org/docs/2.3/es/)
- Secure Developement for Mobile Apps. J. D. GLaser. ED. CRC
PRESS.


---

#### ¿Dudas?

 ![Image of Wireframe](./media/T1/image8.png)
